import cv2
import numpy as np
import matplotlib.pyplot as plt
import urllib.request

# URL gambar
url = 'data:image/jpeg;base64,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'

# Unduh gambar dari URL
urllib.request.urlretrieve(url, 'input_image.jpg')

# Baca gambar yang sudah diunduh
img = cv2.imread('input_image.jpg')

# Cek apakah gambar berhasil dibaca
if img is None:
    print("Error: Gambar tidak ditemukan atau gagal dibaca.")
else:
    # Fungsi untuk melakukan histogram equalization
    def histogram_equalization(img):
        # Konversi gambar ke skala abu-abu jika berwarna
        if len(img.shape) == 3:
            img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
        else:
            img_gray = img

        # Histogram equalization
        img_equalized = cv2.equalizeHist(img_gray)

        return img_gray, img_equalized

    # Lakukan histogram equalization
    img_gray, img_equalized = histogram_equalization(img)

    # Tampilkan hasil
    plt.figure(figsize=(12, 6))

    plt.subplot(1, 2, 1)
    plt.title('Original Grayscale Image')
    plt.imshow(img_gray, cmap='gray')
    plt.axis('off')

    plt.subplot(1, 2, 2)
    plt.title('Histogram Equalized Image')
    plt.imshow(img_equalized, cmap='gray')
    plt.axis('off')

    plt.show()

    # Simpan hasil gambar
    cv2.imwrite('equalized_image.jpg', img_equalized)
